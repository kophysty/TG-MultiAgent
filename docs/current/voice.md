# Voice —Ä–µ–∂–∏–º (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Ä–∞–±–æ—á–∏–π voice flow –≤ –±–æ—Ç–µ.

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç (v1)

–ö–æ–≥–¥–∞ —Ç—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—à—å voice –≤ Telegram:

- –±–æ—Ç –±–µ—Ä–µ—Ç `file_id`
- —Å–∫–∞—á–∏–≤–∞–µ—Ç OGG/OPUS
- –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —á–µ—Ä–µ–∑ `ffmpeg` –≤ `wav 16kHz mono PCM`
- –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç wav –≤ OpenAI Whisper (STT)
- –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—Å—Ç
- –ø—Ä–æ–≥–æ–Ω—è–µ—Ç —Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ AI –ø–ª–∞–Ω–Ω–µ—Ä (tool calling)
  - –µ—Å–ª–∏ —ç—Ç–æ –≤–æ–ø—Ä–æ—Å - –æ—Ç–≤–µ—á–∞–µ—Ç –≤ —á–∞—Ç
  - –µ—Å–ª–∏ –Ω—É–∂–µ–Ω —Å–ø–∏—Å–æ–∫ –∏–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ –≤ Notion - –≤—ã–∑—ã–≤–∞–µ—Ç Notion tools (list, find, update, done, deprecated, append description)
  - –µ—Å–ª–∏ —ç—Ç–æ –Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç summary –∏ –ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (–∫–Ω–æ–ø–∫–∞–º–∏ –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–º)

## –°—Ç–∞—Ç—É—Å—ã (UX)

–ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–¥–Ω–æ —Å—Ç–∞—Ç—É—Å-—Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –µ–≥–æ —á–µ—Ä–µ–∑ `editMessageText`:

- "Voice: —Å–∫–∞—á–∏–≤–∞—é..." (—ç–º–æ–¥–∂–∏: ‚¨áÔ∏è)
- "Voice: –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é (ffmpeg)..." (—ç–º–æ–¥–∂–∏: üîÑ)
- "Voice: —Ä–∞—Å–ø–æ–∑–Ω–∞—é (STT)..." (—ç–º–æ–¥–∂–∏: üé§)
- "Voice: —Ñ–æ—Ä–º–∏—Ä—É—é –∑–∞–¥–∞—á—É..." / "Voice: –ø–ª–∞–Ω–∏—Ä—É—é..." (—ç–º–æ–¥–∂–∏: ü§î)
- "Voice: –≤—ã–ø–æ–ª–Ω—è—é..." (—ç–º–æ–¥–∂–∏: ‚öôÔ∏è)
- —Ñ–∏–Ω–∞–ª—å–Ω–æ –∑–∞–º–µ–Ω—è–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞: "–†–∞—Å–ø–æ–∑–Ω–∞–Ω–æ: <–æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞...>" (—ç–º–æ–¥–∂–∏: ‚úÖ)

–ï—Å–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–µ —É–¥–∞–ª–æ—Å—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É–¥–∞–ª–∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ) - –±–æ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±–µ–∑ –ø–∞–¥–µ–Ω–∏—è.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `OPENAI_API_KEY` - –∫–ª—é—á OpenAI (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ –¥–ª—è AI, –∏ –¥–ª—è STT).
- `TG_STT_MODEL` - –º–æ–¥–µ–ª—å STT (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `whisper-1`).
- `TG_STT_LANGUAGE` - —è–∑—ã–∫ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `ru`).
- `TG_TZ` - —Ç–∞–π–º–∑–æ–Ω–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `Europe/Moscow`), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ "–Ω–∞ —Å–µ–≥–æ–¥–Ω—è" –∏ –¥–∞—Ç—ã.

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `ffmpeg-static` - –±–∏–Ω–∞—Ä–Ω–∏–∫ ffmpeg, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ Node –ø—Ä–æ—Ü–µ—Å—Å–∞.
- `form-data` - multipart upload –¥–ª—è OpenAI STT endpoint.


