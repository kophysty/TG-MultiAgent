# Бот UI и команды (текущая реализация)

Этот раздел описывает поведение “обычного” бота (команды и клавиатура), без учета AI (AI - опционален флагом).

## Команды

### /start

- Показывает клавиатуру быстрых команд.
- Пишет приветствие и версию бота (например `v0.1.0`).

### /list

- Загружает задачи из Notion.
- Показывает только активные задачи (не `Done`) и не показывает задачи с тегом `Deprecated`.
- Группирует по категориям (Tags).
- В UI может показывать `Today` как алиас тега `Inbox`.

### /today

- Загружает задачи из Notion.
- “Сегодня” - это:
  - задачи с тегом `Inbox` (в UI отображаются как `Today`)
  - задачи с due date = сегодня (из других категорий)
  - задачи с высоким приоритетом (из других категорий)
- Не показывает задачи с тегом `Deprecated`.

### /addtask

Ручной детерминированный сценарий добавления задачи (без AI):

1) Бот просит ввести текст задачи
2) Бот показывает inline клавиатуру выбора категории
3) В зависимости от категории:
   - для `Work` и `Home` после приоритета просит выбрать дату (календарь)
   - для других категорий после приоритета сразу создает задачу

Таймауты:

- Если пользователь не выбрал категорию за таймаут - задача добавится в Notion с тегом `Inbox`.

Категории:

- Список категорий берется динамически из Notion `Tags` options.
- `Deprecated` не показывается.
- `Today` в UI - это алиас: при выборе `Today` в Notion записывается тег `Inbox`.

### /struct

- Печатает структуру Notion базы (имя свойства и тип).

## Клавиатура (reply keyboard)

По команде `/start` показывается клавиатура:

- `/today`
- `/list`
- `/addtask`
- `/struct`

## Inline меню (manual add flow)

- Выбор категории: кнопки по категориям (Tags) + `Cancel`.
- Выбор приоритета: кнопки `skip` и значения из Notion `Priority` options.
- Выбор даты: календарь (для `Work` и `Home`).

## Важно

- Polling consumer должен быть один на токен: нельзя одновременно запускать несколько процессов бота на один и тот же токен.


