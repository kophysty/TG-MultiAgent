# Memory: "предпочтения" + авто-извлечение

Новый модуль: `Memory & Preferences`

## Компоненты

- **Preference Extractor (LLM)**: после каждого диалога (или при явных триггерах типа "я хочу", "мне нравится", "сделай всегда так") формирует кандидаты предпочтений.
  - Пример (структура кандидата):
    - `{"key":"default_section","value":"RDS","reason":"...","confidence":0.86,"scope":"global|project"}`
- **Memory Store (Postgres)**: таблица `preferences` + `facts` (если нужно) + `last_used_context`.
- **Memory Injector**: перед планированием добавляет релевантные предпочтения в контекст (например: "по умолчанию раздел: RDS", "таймзона: Amsterdam", "если нет даты - ставь сегодня + Inbox").

## Практичное правило, чтобы не засорять память

- сохраняем автоматически только то, что **явно сформулировано как предпочтение** или повторялось 2+ раз
- иначе оставляем как candidate до подтверждения


