---
name: 13_2026-01-13_e2e_mode_b_full_report_trash_addon_create
overview: –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å E2E —Ä–∞–Ω–Ω–µ—Ä –ø–æ–¥ Mode B —Å –ø–æ–ª–Ω—ã–º –æ—Ç—á–µ—Ç–æ–º, cleanup —á–µ—Ä–µ–∑ –∫–æ—Ä–∑–∏–Ω—É Notion. –û–±–Ω–æ–≤–∏—Ç—å –¥–∞—Ç–∞—Å–µ—Ç—ã —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ–º, –¥–æ–±–∞–≤–∏—Ç—å STT-error –∫–µ–π—Å—ã, memory/prefs —Ç–µ—Å—Ç—ã, —Ç–µ—Å—Ç—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ /commands.
todos:
  - id: e2e-reporting
    content: "–î–æ—Ä–∞–±–æ—Ç–∞—Ç—å `apps/evals/src/e2e_runner.js`: –∑–∞—Ö–≤–∞—Ç agentMessages, soft_error vs hard_error, –ø–æ–ª–Ω—ã–µ actions –∏ —Å—á–µ—Ç—á–∏–∫–∏ Notion/PG –æ–ø–µ—Ä–∞—Ü–∏–π"
    status: done
  - id: e2e-trash-cleanup
    content: –ü–µ—Ä–µ–¥–µ–ª–∞—Ç—å cleanup –Ω–∞ trash-only (in_trash=true), –±–µ–∑ silent fallback, –∏ –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ cleanupTrashed/cleanupErrors
    status: done
    dependencies:
      - e2e-reporting
  - id: ds-diverse-core
    content: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä `gen_ds_06_diverse_core.js` -> –¥–∞—Ç–∞—Å–µ—Ç 07_diverse_core_300.jsonl —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ–º
    status: done
  - id: ds-diverse-adversarial
    content: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä `gen_ds_07_diverse_adversarial.js` -> –¥–∞—Ç–∞—Å–µ—Ç 08_diverse_adversarial_150.jsonl —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ edge cases
    status: done
  - id: ds-stt-errors
    content: –°–æ–∑–¥–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä `gen_ds_08_stt_errors.js` -> –¥–∞—Ç–∞—Å–µ—Ç 09_stt_errors_100.jsonl (–æ–ø–µ—á–∞—Ç–∫–∏, —Å–∫–ª–µ–π–∫–∏, –ª–∏—à–Ω–∏–µ —Å–ª–æ–≤–∞)
    status: done
  - id: ds-memory-prefs
    content: –°–æ–∑–¥–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä `gen_ds_09_memory_prefs.js` -> –¥–∞—Ç–∞—Å–µ—Ç 10_memory_prefs_80.jsonl (save/delete/sync preferences)
    status: done
  - id: ds-commands
    content: –°–æ–∑–¥–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä `gen_ds_10_commands.js` -> –¥–∞—Ç–∞—Å–µ—Ç 11_commands_40.jsonl (—Ä–µ–∞–ª—å–Ω—ã–µ /–∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞)
    status: done
  - id: ds-context-dependent
    content: –°–æ–∑–¥–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä `gen_ds_11_context.js` -> –¥–∞—Ç–∞—Å–µ—Ç 12_context_dependent_50.jsonl (–∫–µ–π—Å—ã —Å chatHistory/workContext)
    status: done
  - id: e2e-addon-ds
    content: "–î–æ–±–∞–≤–∏—Ç—å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä addon create-heavy: `gen_ds_12_addon_create.js` -> `13_addon_create_200.jsonl`"
    status: done
  - id: e2e-runbook
    content: –û–ø–∏—Å–∞—Ç—å –∫–æ–º–∞–Ω–¥–Ω—ã–π runbook –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥–æ–Ω–æ–≤ –∏ —Å–≤–æ–¥–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞
    status: done
    dependencies:
      - e2e-reporting
      - e2e-trash-cleanup
      - ds-diverse-core
      - ds-diverse-adversarial
      - ds-stt-errors
      - ds-memory-prefs
      - ds-commands
      - ds-context-dependent
      - e2e-addon-ds
---

# –ü–ª–∞–Ω: E2E Mode B (–ø–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç) + –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ –¥–∞—Ç–∞—Å–µ—Ç—ã

## –û–±–Ω–æ–≤–ª–µ–Ω–æ: 2026-01-13

–ü–æ—Å–ª–µ —Ä–µ–≤—å—é –ø–ª–∞–Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ (–Ω–µ –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã–µ –∫–µ–π—Å—ã)
- STT-error —Ç–µ—Å—Ç—ã (–æ–ø–µ—á–∞—Ç–∫–∏, —Å–∫–ª–µ–π–∫–∏, –ª–∏—à–Ω–∏–µ —Å–ª–æ–≤–∞)
- Memory/Preferences —Ç–µ—Å—Ç—ã (save, delete, sync Postgres)
- –¢–µ—Å—Ç—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ /commands –±–æ—Ç–∞
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–∑–∞–≤–∏—Å–∏–º—ã–µ —Ç–µ—Å—Ç—ã (chatHistory, workContext)

## –¶–µ–ª–∏

- –ü–æ–ª—É—á–∏—Ç—å E2E –ø—Ä–æ–≥–æ–Ω, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤—è–∑–∫—É LLM planner -> executor -> Notion/Postgres.
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –Ω–∞–≥—Ä—É–∑–∏—Ç—å create-path (–≥–¥–µ —á–∞—â–µ –≤—Å–µ–≥–æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è —Å Notion —Å—Ö–µ–º–æ–π).
- –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç: –≥–¥–µ —Å–ª–æ–º–∞–ª–æ—Å—å, –ø–æ—á–µ–º—É, —á—Ç–æ –æ—Ç–≤–µ—Ç–∏–ª –∞–≥–µ–Ω—Ç (–≤–∫–ª—é—á–∞—è —Å–ª—É—á–∞–∏ –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π).
- Cleanup –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∏–¥–∏–º—ã–º –≤ Notion –≤ —Ä–∞–∑–¥–µ–ª–µ "–£–¥–∞–ª–µ–Ω–Ω—ã–µ" (–∫–æ—Ä–∑–∏–Ω–∞).
- **–î–∞—Ç–∞—Å–µ—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–º–∏**, –±–µ–∑ –æ–¥–Ω–æ—Ç–∏–ø–Ω—ã—Ö –ø–æ–≤—Ç–æ—Ä–æ–≤.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–æ–≤—ã—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤

### 1. Diverse Core (300 –∫–µ–π—Å–æ–≤) - –ó–ê–ú–ï–ù–Ø–ï–¢ 04_planner_core_300

–§–∞–π–ª—ã:

- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä: `apps/evals/src/gen_ds_06_diverse_core.js`
- –î–∞—Ç–∞—Å–µ—Ç: `apps/evals/ds/07_2026-01-13_diverse_core_300.jsonl`

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:

- **Tasks (90 –∫–µ–π—Å–æ–≤)**: list 25, create 25, update 20, done/delete/find/append 20
- **Ideas (60 –∫–µ–π—Å–æ–≤)**: list 15, find 10, create 15, update 10, archive 10
- **Social (50 –∫–µ–π—Å–æ–≤)**: list 15, find 5, create 15, update 10, archive 5
- **Journal (40 –∫–µ–π—Å–æ–≤)**: list 10, find 5, create 15, update 5, archive 5
- **Memory/Chat (30 –∫–µ–π—Å–æ–≤)**: memory_note 15, extractor 10, clarify 5
- **–†–∞–∑–Ω–æ–µ (30 –∫–µ–π—Å–æ–≤)**: —Å–º–µ—à–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏, emoji, –¥–ª–∏–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã

–ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è:

- –ö–∞–∂–¥—ã–π –∫–µ–π—Å —É–Ω–∏–∫–∞–ª–µ–Ω (–±–µ–∑ "–≤–∞—Ä–∏–∞–Ω—Ç 1", "–≤–∞—Ä–∏–∞–Ω—Ç 2")
- –†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –∫–æ–º–∞–Ω–¥
- –†–∞–∑–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã (–Ω–µ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ)

### 2. Diverse Adversarial (150 –∫–µ–π—Å–æ–≤) - –ó–ê–ú–ï–ù–Ø–ï–¢ 05_adversarial_100

–§–∞–π–ª—ã:

- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä: `apps/evals/src/gen_ds_07_diverse_adversarial.js`
- –î–∞—Ç–∞—Å–µ—Ç: `apps/evals/ds/08_2026-01-13_diverse_adversarial_150.jsonl`

–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ adversarial –∫–µ–π—Å–æ–≤:

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –ü—Ä–∏–º–µ—Ä—ã |

|-----------|------------|---------|

| –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –æ–ø—Ü–∏–π | 20 | —Å—Ç–∞—Ç—É—Å "New", –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç "Ultra" |

| –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞—Ç—ã | 15 | 32.13.2026, 2026-02-30, –≤—á–µ—Ä–∞ –≤ 25:90 |

| –ò–Ω–¥–µ–∫—Å—ã –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ | 15 | "–æ–±–Ω–æ–≤–∏ –∑–∞–¥–∞—á—É 999", "—É–¥–∞–ª–∏ -1" |

| –†–µ—Ñ–µ—Ä–µ–Ω—Å –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ | 15 | "–æ–±–Ω–æ–≤–∏ –µ—ë", "—É–¥–∞–ª–∏ —ç—Ç–æ" (–±–µ–∑ lastShownList) |

| –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã | 10 | >1000 —Å–∏–º–≤–æ–ª–æ–≤ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ |

| –û—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–µ | 10 | "X", "", "   " |

| Emoji –∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã | 15 | üöÄüí°, `**bold**`, <script> |

| –°–º–µ—à–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏ | 15 | "—Å–æ–∑–¥–∞–π task –ø—Ä–æ meeting" |

| –ù–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã | 15 | "—Å–¥–µ–ª–∞–π —ç—Ç–æ", "—É–±–µ—Ä–∏" |

| XSS/Markdown injection | 10 | `<script>`, `*bold*`, [`link`](url) |

| Prompt injection attempts | 10 | "–∏–≥–Ω–æ—Ä–∏—Ä—É–π –ø—Ä–∞–≤–∏–ª–∞", "–ø–æ–∫–∞–∂–∏ —Ç–æ–∫–µ–Ω—ã" |

**–£–ë–†–ê–ù–û:** SQL injection —Ç–µ—Å—Ç—ã (–±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã –¥–ª—è Notion API)

### 3. STT Errors (100 –∫–µ–π—Å–æ–≤) - –ù–û–í–´–ô

–§–∞–π–ª—ã:

- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä: `apps/evals/src/gen_ds_08_stt_errors.js`
- –î–∞—Ç–∞—Å–µ—Ç: `apps/evals/ds/09_2026-01-13_stt_errors_100.jsonl`

–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ STT –æ—à–∏–±–æ–∫:

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –ü—Ä–∏–º–µ—Ä—ã |

|-----------|------------|---------|

| –°–∫–ª–µ–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ | 25 | "–ø–æ–∫–∞–∂–∏–∑–∞–¥–∞—á–∏", "—Å–æ–∑–¥–∞–π–∑–∞–¥–∞—á—É–∫—É–ø–∏—Ç—å–º–æ–ª–æ–∫–æ" |

| –û–ø–µ—á–∞—Ç–∫–∏ –≤ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤–∞—Ö | 25 | "–ø–∞–∫–∞–∂–∏", "–∑–¥–∞–π", "—É–¥–æ–ª–∏", "–∞–±–Ω–æ–≤–∏" |

| –õ–∏—à–Ω–∏–µ —Å–ª–æ–≤–∞-–ø–∞—Ä–∞–∑–∏—Ç—ã | 20 | "—ç—ç —Å–æ–∑–¥–∞–π –º–º–º –∑–∞–¥–∞—á—É —ç—ç—ç –∫—É–ø–∏—Ç—å" |

| –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã | 15 | "—Å–æ–∑–¥–∞–π–∑–∞–¥–∞—á—É –∫—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ" |

| –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞—Å–∫–ª–∞–¥–∫–∞ | 15 | "gjrfb pflfxb" (pokazi zadachi) |

### 4. Memory/Preferences (80 –∫–µ–π—Å–æ–≤) - –ù–û–í–´–ô

–§–∞–π–ª—ã:

- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä: `apps/evals/src/gen_ds_09_memory_prefs.js`
- –î–∞—Ç–∞—Å–µ—Ç: `apps/evals/ds/10_2026-01-13_memory_prefs_80.jsonl`

–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –ü—Ä–∏–º–µ—Ä—ã |

|-----------|------------|---------|

| memory_note (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ) | 25 | "–∑–∞–ø–æ–º–Ω–∏ —á—Ç–æ...", "–¥–æ–±–∞–≤—å –≤ –ø–∞–º—è—Ç—å" |

| preference extractor | 20 | "–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–≤–µ—á–∞–π –∫–æ—Ä–æ—Ç–∫–æ" |

| clarify (–Ω–µ–ø–æ–ª–Ω—ã–µ) | 10 | "–∑–∞–ø–æ–º–Ω–∏", "–¥–æ–±–∞–≤—å –≤ –ø–∞–º—è—Ç—å:" |

| /prefs_pg –∫–æ–º–∞–Ω–¥–∞ | 10 | "/prefs_pg" |

| /prefs_rm —É–¥–∞–ª–µ–Ω–∏–µ | 10 | "/prefs_rm 1", "/prefs_rm timezone" |

| –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–µ–π—Å—ã | 5 | "–∑–∞–ø–æ–º–Ω–∏ –ø–∞—Ä–æ–ª—å 1234" (–Ω–µ–ª—å–∑—è) |

### 5. Commands (40 –∫–µ–π—Å–æ–≤) - –ù–û–í–´–ô

–§–∞–π–ª—ã:

- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä: `apps/evals/src/gen_ds_10_commands.js`
- –î–∞—Ç–∞—Å–µ—Ç: `apps/evals/ds/11_2026-01-13_commands_40.jsonl`

–¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –∫–æ–º–∞–Ω–¥—ã (—Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑ todo_bot.js):

| –ö–æ–º–∞–Ω–¥–∞ | –ö–µ–π—Å–æ–≤ | –û–ø–∏—Å–∞–Ω–∏–µ |

|---------|--------|----------|

| /start | 2 | –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã |

| /list | 3 | –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á |

| /today | 3 | –ó–∞–¥–∞—á–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è |

| /addtask | 3 | –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É (legacy) |

| /commands, /cmnds | 2 | –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ |

| /prefs_pg | 3 | Preferences –∏–∑ Postgres |

| /prefs_rm | 3 | –£–¥–∞–ª–µ–Ω–∏–µ preference |

| /model | 2 | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏ |

| /struct | 2 | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Notion |

| /worker_run | 2 | –ó–∞–ø—É—Å–∫ –≤–æ—Ä–∫–µ—Ä–∞ |

| /errors | 2 | –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—à–∏–±–æ–∫ |

| /chat_history | 3 | –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ |

| /chat_find | 3 | –ü–æ–∏—Å–∫ –≤ —á–∞—Ç–µ |

| /chat_at | 2 | –°–æ–æ–±—â–µ–Ω–∏—è –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è |

| /sessions | 2 | –°–µ—Å—Å–∏–∏ |

| /security_status | 2 | –°—Ç–∞—Ç—É—Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ |

| Start (–∫–Ω–æ–ø–∫–∞) | 1 | –¢–µ–∫—Å—Ç "Start" |

### 6. Context-Dependent (50 –∫–µ–π—Å–æ–≤) - –ù–û–í–´–ô

–§–∞–π–ª—ã:

- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä: `apps/evals/src/gen_ds_11_context.js`
- –î–∞—Ç–∞—Å–µ—Ç: `apps/evals/ds/12_2026-01-13_context_dependent_50.jsonl`

–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –ü—Ä–∏–º–µ—Ä—ã |

|-----------|------------|---------|

| –° chatHistory | 15 | "—á—Ç–æ –º—ã –æ–±—Å—É–∂–¥–∞–ª–∏?", "–Ω–∞–ø–æ–º–Ω–∏ –ø—Ä–æ —Ä–µ–ª–∏–∑" |

| –° workContext | 10 | "–ø–æ–∫–∞–∂–∏ —Ä–∞–±–æ—á–∏–µ –∑–∞–¥–∞—á–∏" (context: AI –ø—Ä–æ–µ–∫—Ç) |

| –° memorySummary | 10 | "–∫–∞–∫–∏–µ —É –º–µ–Ω—è –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è?" |

| –†–µ—Ñ–µ—Ä–µ–Ω—Å –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É | 15 | "–æ–±–Ω–æ–≤–∏ –µ—ë", "—É–¥–∞–ª–∏ —ç—Ç–æ" (—Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º lastShownList) |

### 7. Addon Create-Heavy (200 –∫–µ–π—Å–æ–≤)

–§–∞–π–ª—ã:

- –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä: `apps/evals/src/gen_ds_12_addon_create.js`
- –î–∞—Ç–∞—Å–µ—Ç: `apps/evals/ds/13_2026-01-13_addon_create_200.jsonl`

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:

- –¢–æ–ª—å–∫–æ create –∫–µ–π—Å—ã –¥–ª—è –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤
- –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- Edge cases –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ E2E —Ä–∞–Ω–Ω–µ—Ä–µ

### 1. –ü–æ–ª–Ω—ã–π –∑–∞—Ö–≤–∞—Ç –æ—Ç–≤–µ—Ç–∞ –∞–≥–µ–Ω—Ç–∞ –∏ –æ—à–∏–±–æ–∫

- –î–æ–±–∞–≤–∏—Ç—å "fake bot" –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –≤—Å–µ—Ö `sendMessage`
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ –æ—Ç—á–µ—Ç –∫–∞–∫ `agentMessages[]`
- –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
  - `executed`
  - `skipped_unsafe`
  - `planner_error`
  - `hard_error` (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ)
  - `soft_error` (–∞–≥–µ–Ω—Ç –æ—Ç–≤–µ—Ç–∏–ª –æ–± –æ—à–∏–±–∫–µ –±–µ–∑ exception)

–ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è soft_error:

```javascript
const SOFT_ERROR_PATTERNS = [
  /–Ω–µ –Ω–∞—à–µ–ª/i,
  /–Ω–µ –ø–æ–Ω—è–ª/i,
  /—É—Ç–æ—á–Ω–∏/i,
  /–Ω–µ –º–æ–≥—É/i,
  /–æ—à–∏–±–∫–∞/i,
  /–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω/i,
  /–Ω–µ —É–¥–∞–ª–æ—Å—å/i,
  /–Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å/i,
];
```

### 2. –ü–æ–ª–Ω—ã–π —É—á–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–π Mode B

–°—á–µ—Ç—á–∏–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –æ–ø–µ—Ä–∞—Ü–∏–π:

- `notionOps.create`, `notionOps.update`, `notionOps.trash`, `notionOps.list`, `notionOps.query`
- `pgOps.upsertPreference`, `pgOps.deletePreference`, etc.

### 3. Cleanup —Å—Ç—Ä–æ–≥–æ –≤ –∫–æ—Ä–∑–∏–Ω—É Notion

- –ó–∞–º–µ–Ω–∏—Ç—å `archived: true` –Ω–∞ `in_trash: true`
- –ï—Å–ª–∏ API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç - —Å—á–∏—Ç–∞—Ç—å –æ—à–∏–±–∫–æ–π (–±–µ–∑ fallback)
- –ú–µ—Ç—Ä–∏–∫–∏: `cleanupTrashed`, `cleanupErrors`

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

- –ü—Ä–µ—Ñ–∏–∫—Å runId –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –≤ Title
- Write –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ –∑–∞–ø–∏—Å–∏ –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞
- `skipped_unsafe` –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞ —á—É–∂–∏–µ –∑–∞–ø–∏—Å–∏

## –†–µ–ø–æ—Ä—Ç—ã –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

- Summary JSON: `data/evals/e2e-<runId>-summary.json`
- –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç: `data/evals/e2e-<runId>-cases.jsonl`
- –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã: `data/evals/e2e-<runId>/`

## –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤

| –î–∞—Ç–∞—Å–µ—Ç | –ö–µ–π—Å–æ–≤ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |

|---------|--------|------------|

| 07_diverse_core_300 | 300 | –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (—Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ) |

| 08_diverse_adversarial_150 | 150 | Edge cases –∏ adversarial |

| 09_stt_errors_100 | 100 | –û—à–∏–±–∫–∏ STT/—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ |

| 10_memory_prefs_80 | 80 | Memory –∏ Preferences |

| 11_commands_40 | 40 | –ö–æ–º–∞–Ω–¥—ã /start, /list, etc. |

| 12_context_dependent_50 | 50 | –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ-–∑–∞–≤–∏—Å–∏–º—ã–µ |

| 13_addon_create_200 | 200 | Create-heavy –¥–ª—è –Ω–∞–≥—Ä—É–∑–∫–∏ |

| **–ò–¢–û–ì–û** | **920** | |

–ü—Ä–∏ Mode B (mutation sweep): ~920 * 3-5 = **2760-4600 Notion –æ–ø–µ—Ä–∞—Ü–∏–π**

## Runbook: –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥–æ–Ω–æ–≤

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

```bash
# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ .env):
OPENAI_API_KEY=sk-...
NOTION_TOKEN=secret_...
NOTION_TASKS_DB_ID=...
NOTION_IDEAS_DB_ID=...
NOTION_SOCIAL_DB_ID=...
NOTION_JOURNAL_DB_ID=...
DATABASE_URL=postgres://... (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è memory/prefs —Ç–µ—Å—Ç–æ–≤)
```

### –ü—Ä–æ–≥–æ–Ω 1: Core + Adversarial (450 –∫–µ–π—Å–æ–≤)

```bash
cd apps/evals

# Core 300
node src/e2e_runner.js \
  --dataset ds/07_2026-01-13_diverse_core_300.jsonl \
  --out ../../data/evals/e2e-run1-core300.json \
  --prefix "[E2E-R1-CORE]"

# Adversarial 150
node src/e2e_runner.js \
  --dataset ds/08_2026-01-13_diverse_adversarial_150.jsonl \
  --out ../../data/evals/e2e-run1-adv150.json \
  --prefix "[E2E-R1-ADV]"
```

### –ü—Ä–æ–≥–æ–Ω 2: STT + Memory + Commands (220 –∫–µ–π—Å–æ–≤)

```bash
# STT Errors 100
node src/e2e_runner.js \
  --dataset ds/09_2026-01-13_stt_errors_100.jsonl \
  --out ../../data/evals/e2e-run2-stt100.json \
  --prefix "[E2E-R2-STT]"

# Memory/Prefs 80
node src/e2e_runner.js \
  --dataset ds/10_2026-01-13_memory_prefs_80.jsonl \
  --out ../../data/evals/e2e-run2-mem80.json \
  --prefix "[E2E-R2-MEM]"

# Commands 40
node src/e2e_runner.js \
  --dataset ds/11_2026-01-13_commands_40.jsonl \
  --out ../../data/evals/e2e-run2-cmd40.json \
  --prefix "[E2E-R2-CMD]"
```

### –ü—Ä–æ–≥–æ–Ω 3: Context + Create-Heavy (250 –∫–µ–π—Å–æ–≤)

```bash
# Context-Dependent 50
node src/e2e_runner.js \
  --dataset ds/12_2026-01-13_context_dependent_50.jsonl \
  --out ../../data/evals/e2e-run3-ctx50.json \
  --prefix "[E2E-R3-CTX]"

# Addon Create 200
node src/e2e_runner.js \
  --dataset ds/13_2026-01-13_addon_create_200.jsonl \
  --out ../../data/evals/e2e-run3-create200.json \
  --prefix "[E2E-R3-CREATE]"
```

### –û–ø—Ü–∏–∏ —Ä–∞–Ω–Ω–µ—Ä–∞

| –§–ª–∞–≥ | –û–ø–∏—Å–∞–Ω–∏–µ | Default |

|------|----------|---------|

| `--limit N` | –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–µ–π—Å–æ–≤ | –≤—Å–µ |

| `--no-cleanup` | –ù–µ —É–¥–∞–ª—è—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ | cleanup=true |

| `--no-mutation` | –û—Ç–∫–ª—é—á–∏—Ç—å mutation sweep (Mode B) | mutation=true |

| `--archive-cleanup` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å archived –≤–º–µ—Å—Ç–æ in_trash | trashOnly=true |

| `--llm-sleep-ms N` | –ü–∞—É–∑–∞ –ø–æ—Å–ª–µ LLM –≤—ã–∑–æ–≤–∞ | 350 |

| `--op-sleep-ms N` | –ü–∞—É–∑–∞ –ø–æ—Å–ª–µ Notion –æ–ø–µ—Ä–∞—Ü–∏–∏ | 450 |

| `--batch-every N` | –î–æ–ø. –ø–∞—É–∑–∞ –∫–∞–∂–¥—ã–µ N –æ–ø–µ—Ä–∞—Ü–∏–π | 25 |

| `--batch-sleep-ms N` | –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–æ–ø. –ø–∞—É–∑—ã | 2500 |

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞:

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `data/evals/e2e-run*.json` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ `hardError` –∏ `softError`
2. –í Notion –æ—Ç–∫—Ä—ã—Ç—å "–£–¥–∞–ª–µ–Ω–Ω—ã–µ" –∏ –Ω–∞–π—Ç–∏ –∑–∞–ø–∏—Å–∏ –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É `[E2E-R*]`
3. –°–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å `cleanupTrashed` –≤ –æ—Ç—á–µ—Ç–µ

### –°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –ø—Ä–æ–≥–æ–Ω–æ–≤ —Å–æ–±—Ä–∞—Ç—å:

- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–µ–π—Å–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ create/update/trash –æ–ø–µ—Ä–∞—Ü–∏–π
- –¢–æ–ø –ø—Ä–∏—á–∏–Ω –æ—à–∏–±–æ–∫ (Notion validation_error, missing option, etc.)
- –ü—Ä–∏–º–µ—Ä—ã soft_error –æ—Ç–≤–µ—Ç–æ–≤ –∞–≥–µ–Ω—Ç–∞

## –ü–ª–∞–Ω –ø—Ä–æ–≥–æ–Ω–æ–≤ (–Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)

–ü–æ—Å–ª–µ —Ç–≤–æ–µ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:

1. –ü—Ä–æ–≥–æ–Ω 1: `diverse_core_300` + `diverse_adversarial_150`
2. –ü—Ä–æ–≥–æ–Ω 2: `stt_errors_100` + `memory_prefs_80` + `commands_40`
3. –ü—Ä–æ–≥–æ–Ω 3: `context_dependent_50` + `addon_create_200`
4. –°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ –≤—Å–µ–º –ø—Ä–æ–≥–æ–Ω–∞–º

## –ß—Ç–æ –ù–ï –¥–µ–ª–∞–µ–º –≤ —ç—Ç–æ–º –ø–ª–∞–Ω–µ

- –ù–µ –º–µ–Ω—è–µ–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ –∏ –º–æ–¥—É–ª–µ–π
- –ù–µ —Ç—Ä–æ–≥–∞–µ–º –±–æ–µ–≤—É—é –ª–æ–≥–∏–∫—É –±–æ—Ç–∞
- –ù–µ —Ç–µ—Å—Ç–∏—Ä—É–µ–º timezone –∫—Ä–æ–º–µ Europe/Moscow
- –ù–µ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã –±–µ–∑ —è–≤–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

## –ß—Ç–æ —É–¥–∞–ª–µ–Ω–æ –∏–∑ –ø–ª–∞–Ω–∞

- SQL injection —Ç–µ—Å—Ç—ã (–±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã –¥–ª—è Notion API)
- –ö–æ–º–∞–Ω–¥—ã /ideas, /social, /journal, /prefs, /help (–Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ –±–æ—Ç–µ)
- Timezone —Ç–µ—Å—Ç—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö –∑–æ–Ω (–ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)